function signIn(t){var e=$(".user-nav");e.removeClass("hidden"),e.find(".username").text(t)}function updateProfile(){Cookies.set("current_user",{name:profileInput.find("#user-name").val(),email:profileInput.find("#user-email").val(),company:profileInput.find("#user-company").val(),job:profileInput.find("#user-job").val(),birthday:profileInput.find("#user-birthday").val(),country:profileInput.find("#user-country").val()})}function getProfile(){profileInput.find("#user-name").val(Cookies.getJSON("current_user").name),profileInput.find("#user-email").val(Cookies.getJSON("current_user").email),profileInput.find("#user-company").val(Cookies.getJSON("current_user").company),profileInput.find("#user-job").val(Cookies.getJSON("current_user").job),profileInput.find("#user-birthday").val(Cookies.getJSON("current_user").birthday),profileInput.find("#user-country").val(Cookies.getJSON("current_user").country)}function createEvent(){var t=new Date(eventInput.find("#start-event-date").val()).toString().split(" "),e=new Date(eventInput.find("#end-event-date").val()).toString().split(" ");Cookies.set("event_"+Cookies.get("counter"),{name:eventInput.find("#event-name").val(),info:eventInput.find("#event-info").val(),host:eventInput.find("#event-host").val(),type:eventInput.find("#event-type").val(),start_date:t,end_date:e,guest_list:eventInput.find("#event-guest").val(),location:eventInput.find("#event-location").val()})}function addCounter(){var t=Cookies.get("counter");t++,Cookies.set("counter",t)}function checkInput(t){if(t.IssueTracker)if(t.IssueTracker.checkValidity(t),t.CustomValidation.displayInvalidities(t),0==t.CustomValidation.invalidities.length&&""!=t.value)t.setCustomValidity("");else{var e=t.CustomValidation.getInvalidities();t.setCustomValidity(e)}}function CustomValidation(){this.invalidities=[],this.validityChecks=[],this.displayInvaliditiesOnBlur=!0}function checkInput(t){if(t.CustomValidation)if(t.CustomValidation.checkValidity(t),t.CustomValidation.displayInvalidities(t),0==t.CustomValidation.invalidities.length&&""!=t.value)t.setCustomValidity("");else{var e=t.CustomValidation.getInvalidities();t.setCustomValidity(e)}}var firstPasswordInput=document.querySelector("#registration #first-password"),secondPasswordInput=document.querySelector("#registration #second-password"),emailInput=document.querySelector("#registration #email"),signupBtn=document.querySelector("#registration #signup-btn"),signout=document.querySelector(".user-nav .sign-out"),error=document.querySelector("#registration #errors"),eventInput=$("#event-form"),profileInput=$("#update-profile"),userInput=$("#user-registration"),startDateInput=document.querySelector("#start-event-date"),endDateInput=document.querySelector("#end-event-date"),today=new Date;signout.onclick=function(){Cookies.remove("current_user")},$("#user-registration").submit(function(){return $.ajax({success:function(){Cookies.set("current_user",{name:userInput.find("#name").val(),email:userInput.find("#email").val(),password:userInput.find("#password").val()})}}),!0}),$("#event-form").submit(function(){return $.ajax({success:function(){createEvent(),addCounter()}}),window.location="#upcomming-event-list"}),$("#update-profile").submit(function(){$.ajax({success:function(){updateProfile()}})}),$(".modal").on("shown.bs.modal",function(){$(this).find("[autofocus]").focus()}),$(document).ready(function(){function t(){var t='<li><time><span class="day">'+e.start_date[2]+'</span><span class="month">'+e.start_date[1]+'</span><span class="year">'+e.start_date[3]+'</span><span class="time">'+e.start_date[4].substr(0,5)+'</span></time><div class="info"><h2 class="title">'+e.name+'</h2><p class="desc">'+e.info+"</p><ul><li><b>Location:</b> "+e.location+"</li><li><b>Organizer:</b> "+e.host+"</li></ul><ul><li><b>type:</b> "+e.type+"</li><li>"+e.start_date[2]+" "+e.start_date[1]+", "+e.start_date[4].substr(0,5)+" - "+e.end_date[2]+" "+e.end_date[1]+", "+e.end_date[4].substr(0,5)+"</li></ul><ul><li><b>Guest list:</b> "+e.guest_list+"</li></ul></div></li>";$("#events-json").prepend(t),$("#upcomming-event-list span").html(Cookies.get("counter"))}void 0!=Cookies.get("current_user")?(signIn(Cookies.getJSON("current_user").name),getProfile(),$("#member-button").hide(),$("#create-event-button").show()):($("#member-button").show(),$("#create-event-button").hide()),void 0==Cookies.get("counter")&&Cookies.set("counter",0);for(var e,i,n=0;n<=Cookies.get("counter")&&(i=Cookies.get("event_"+n),void 0!=i);n++)e=jQuery.parseJSON(i),t();startDateInput.min=today.toJSON().substr(0,16)}),startDateInput.addEventListener("change",function(){if(startDateInput.value)var t=new Date(startDateInput.value);t.setMinutes(t.getMinutes()+10),endDateInput.min=t.toJSON().substr(0,16)},!1);for(var forms=document.getElementsByTagName("form"),i=0;i<forms.length;i++)forms[i].addEventListener("invalid",function(t){t.preventDefault(),$("pre.invalid",t.target.parentElement).remove(),t.target.parentElement.insertAdjacentHTML("beforeend","<pre class='invalid'>"+t.target.validationMessage+"</pre>")},!0);for(var inputs=document.querySelectorAll('input:not([type="submit"])'),i=0;i<inputs.length;i++)inputs[i].addEventListener("input",function(t){t.target.classList.add("dirty")});var inputs=document.querySelectorAll("input"),submit=document.querySelector('button[type="submit"]');if(inputs)for(var i=0;i<inputs.length;i++){var input=inputs[i];input.addEventListener("change",function(){checkInput(this)}),input.addEventListener("keyup",function(){checkInput(this)})}CustomValidation.prototype={addInvalidity:function(t){this.invalidities.push(t)},getInvalidities:function(){return this.invalidities.join(". \n")},displayInvalidities:function(t){if(this.checkValidity(t),this.displayInvaliditiesOnBlur){this.invalidities.length>0?t.classList.add("invalid"):t.classList.remove("invalid");for(var e=[],i=0;i<this.invalidities.length;i++)e.push("<li>"+this.invalidities[i]+"</li>");e=e.join();var n=t.getAttribute("id"),a=document.querySelector("#"+n+" + ul");a.innerHTML=e}else this.invalidities.length>0?t.classList.add("invalid"):t.classList.remove("invalid")},checkValidity:function(t){this.invalidities=[];for(var e=0;e<this.validityChecks.length;e++){var i=this.validityChecks[e].isInvalid(t);i&&this.addInvalidity(this.validityChecks[e].invalidityMessage);var n=this.validityChecks[e].element;n&&(i?n.classList.remove("valid"):n.classList.add("valid"))}}},emailInput&&(emailInput.CustomValidation=new CustomValidation,emailInput.CustomValidation.validityChecks=[{isInvalid:function(t){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!emailInput.value.match(e)},invalidityMessage:"Invalid email address"}]),firstPasswordInput&&(firstPasswordInput.CustomValidation=new CustomValidation,firstPasswordInput.CustomValidation.displayInvaliditiesOnBlur=!1,firstPasswordInput.CustomValidation.validityChecks=[{isInvalid:function(t){return t.value.length<8||t.value.length>100},invalidityMessage:"Should be longer than 8 words and less than 100 words",element:document.querySelector("#first-password + ul li.length")},{isInvalid:function(t){return!t.value.match(/[\!\@\#\$\%\^\&\*]/g)},invalidityMessage:"Missing a symbol",element:document.querySelector("#first-password + ul li.special")},{isInvalid:function(t){return!t.value.match(/[0-9]/g)},invalidityMessage:"Missing a number",element:document.querySelector("#first-password + ul li.number")},{isInvalid:function(t){return!t.value.match(/[a-z]/g)},invalidityMessage:"Missing a lowercase letter",element:document.querySelector("#first-password + ul li.lowercase")},{isInvalid:function(t){return!t.value.match(/[A-Z]/g)},invalidityMessage:"Missing an uppercase letter",element:document.querySelector("#first-password + ul li.uppercase")}]),secondPasswordInput&&(secondPasswordInput.CustomValidation=new CustomValidation,secondPasswordInput.CustomValidation.validityChecks=[{isInvalid:function(){return secondPasswordInput.value!=firstPasswordInput.value&&""!=secondPasswordInput.value.value},invalidityMessage:"Password must be match"}]);var userName=document.getElementById("name");userName&&(userName.CustomValidation=new CustomValidation,userName.CustomValidation.validityChecks=[{isInvalid:function(t){return t.value.length<3},invalidityMessage:"Needs to be at least 3 characters"}]);var userCompany=document.getElementById("user-company");userCompany&&(userCompany.CustomValidation=new CustomValidation,userCompany.CustomValidation.validityChecks=[{isInvalid:function(t){return t.value.length<3},invalidityMessage:"Needs to be at least 3 characters"}]);var userJob=document.getElementById("user-job");userJob&&(userJob.CustomValidation=new CustomValidation,userJob.CustomValidation.validityChecks=[{isInvalid:function(t){return t.value.length<3},invalidityMessage:"Needs to be at least 3 characters"}]);var userCountry=document.getElementById("user-country");userCountry&&(userCountry.CustomValidation=new CustomValidation,userCountry.CustomValidation.validityChecks=[{isInvalid:function(t){return t.value.length<3},invalidityMessage:"Needs to be at least 3 characters"}]);var eventName=document.getElementById("event-name");eventName&&(eventName.CustomValidation=new CustomValidation,eventName.CustomValidation.validityChecks=[{isInvalid:function(t){return t.value.length<3},invalidityMessage:"Needs to be at least 3 characters"}]);var eventHost=document.getElementById("event-host");eventHost&&(eventHost.CustomValidation=new CustomValidation,eventHost.CustomValidation.validityChecks=[{isInvalid:function(t){return t.value.length<3},invalidityMessage:"Needs to be at least 3 characters"}]);var eventGuest=document.getElementById("event-guest");eventGuest&&(eventGuest.CustomValidation=new CustomValidation,eventGuest.CustomValidation.validityChecks=[{isInvalid:function(t){return t.value.length<3},invalidityMessage:"Needs to be at least 3 characters"}]);var eventLocation=document.getElementById("event-location");eventLocation&&(eventLocation.CustomValidation=new CustomValidation,eventLocation.CustomValidation.validityChecks=[{isInvalid:function(t){return t.value.length<3},invalidityMessage:"Needs to be at least 3 characters"}]),startDateInput&&(startDateInput.CustomValidation=new CustomValidation,startDateInput.CustomValidation.validityChecks=[{isInvalid:function(t){var e=new Date(t.value);return e<today},invalidityMessage:"The start date need to be from now"}]),endDateInput&&(endDateInput.CustomValidation=new CustomValidation,endDateInput.CustomValidation.validityChecks=[{isInvalid:function(t){var e=new Date(t.value),i=new Date(startDateInput.value);return i.setMinutes(i.getMinutes()+10),e<i},invalidityMessage:"The end date need to be after start date"}]);