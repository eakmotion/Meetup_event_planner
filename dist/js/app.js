"use strict";function IssueTracker(){this.issues=[]}function passwordValidation(){var e=firstPasswordInput.value,t=secondPasswordInput.value,n=new IssueTracker,s=new IssueTracker,a=$("#registration #first-password + ul.input-requirements");e.length<8||e.length>100?(n.add("should be longer than 8 words and less than 100 words"),a.find("li.length").addClass("invalid")):(a.find("li.length").addClass("valid"),a.find("li.length").removeClass("invalid")),e.match(/[\!\@\#\$\%\^\&\*]/g)?(a.find("li.special").removeClass("invalid"),a.find("li.special").addClass("valid")):(n.add("missing a symbol"),a.find("li.special").addClass("invalid")),e.match(/[0-9]/g)?(a.find("li.number").removeClass("invalid"),a.find("li.number").addClass("valid")):(n.add("missing a number"),a.find("li.number").addClass("invalid")),e.match(/[a-z]/g)?(a.find("li.lowercase").removeClass("invalid"),a.find("li.lowercase").addClass("valid")):(n.add("missing a lowercase letter"),a.find("li.lowercase").addClass("invalid")),e.match(/[A-Z]/g)?(a.find("li.uppercase").removeClass("invalid"),a.find("li.uppercase").addClass("valid")):(n.add("missing an uppercase letter"),a.find("li.uppercase").addClass("invalid"));var i=e.match(/[^A-z0-9\!\@\#\$\%\^\&\*]/g);i&&i.forEach(function(e){n.add("includes illegal characters: "+e)}),e!==t&&s.add("Password must be match");var r=n.retrieve(),o=s.retrieve();firstPasswordInput.setCustomValidity(r),secondPasswordInput.setCustomValidity(o)}function emailValidation(){var e=emailInput.value,t=new IssueTracker,n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;e.match(n)||t.add("incorrect email");var s=t.retrieve();emailInput.setCustomValidity(s)}function signIn(e){var t=$(".user-nav");t.removeClass("hidden"),t.find(".username").text(e)}function updateProfile(){Cookies.set("current_user",{name:profileInput.find("#user-name").val(),email:profileInput.find("#user-email").val(),company:profileInput.find("#user-company").val(),job:profileInput.find("#user-job").val(),birthday:profileInput.find("#user-birthday").val(),country:profileInput.find("#user-country").val()})}function getProfile(){profileInput.find("#user-name").val(Cookies.getJSON("current_user").name),profileInput.find("#user-email").val(Cookies.getJSON("current_user").email),profileInput.find("#user-company").val(Cookies.getJSON("current_user").company),profileInput.find("#user-job").val(Cookies.getJSON("current_user").job),profileInput.find("#user-birthday").val(Cookies.getJSON("current_user").birthday),profileInput.find("#user-country").val(Cookies.getJSON("current_user").country)}function createEvent(){var e=new Date(eventInput.find("#start-event-date").val()).toString().split(" "),t=new Date(eventInput.find("#end-event-date").val()).toString().split(" ");Cookies.set("event_"+Cookies.get("counter"),{name:eventInput.find("#event-name").val(),info:eventInput.find("#event-info").val(),host:eventInput.find("#event-host").val(),type:eventInput.find("#event-type").val(),start_date:e,end_date:t,guest_list:eventInput.find("#event-guest").val(),location:eventInput.find("#event-location").val()})}function addCounter(){var e=Cookies.get("counter");e++,Cookies.set("counter",e)}function validateEventDate(){var e=new Date(eventInput.find("#start-event-date").val()),t=new Date(eventInput.find("#end-event-date").val());t<e&&(alert("End date should be greater than start date"),document.getElementById("end-event-date").value="")}var firstPasswordInput=document.querySelector("#registration #first-password"),secondPasswordInput=document.querySelector("#registration #second-password"),emailInput=document.querySelector("#registration #email"),signupBtn=document.querySelector("#registration #signup-btn"),signout=document.querySelector(".user-nav .sign-out"),error=document.querySelector("#registration #errors"),eventInput=$("#event-form"),profileInput=$("#update-profile"),userInput=$("#user-registration");IssueTracker.prototype={add:function(e){this.issues.push(e)},retrieve:function(){var e="";switch(this.issues.length){case 0:break;case 1:e="Please correct the following issues:\n"+this.issues[0];break;default:e="Please correct the following issues:\n"+this.issues.join("\n")}return e}},signupBtn.onclick=function(){emailValidation(),passwordValidation()},signout.onclick=function(){Cookies.remove("current_user")},$("#user-registration").submit(function(){return $.ajax({success:function(){Cookies.set("current_user",{name:userInput.find("#name").val(),email:userInput.find("#email").val(),password:userInput.find("#password").val()})}}),!0}),$("#event-form").submit(function(){return $.ajax({success:function(){createEvent(),addCounter()}}),window.location="#upcomming-event-list"}),$("#update-profile").submit(function(){$.ajax({success:function(){updateProfile()}})}),$(".modal").on("shown.bs.modal",function(){$(this).find("[autofocus]").focus()}),$("#end-event-date").change(function(){validateEventDate()}),$("#start-event-date").change(function(){void 0!=$("#end-event-date").val()&&validateEventDate()}),$("#first-password").keyup(function(){passwordValidation()}),$(document).ready(function(){function e(){var e='<li><time><span class="day">'+t.start_date[2]+'</span><span class="month">'+t.start_date[1]+'</span><span class="year">'+t.start_date[3]+'</span><span class="time">'+t.start_date[4].substr(0,5)+'</span></time><div class="info"><h2 class="title">'+t.name+'</h2><p class="desc">'+t.info+"</p><ul><li><b>Location:</b> "+t.location+"</li><li><b>Organizer:</b> "+t.host+"</li></ul><ul><li><b>type:</b> "+t.type+"</li><li>"+t.start_date[2]+" "+t.start_date[1]+", "+t.start_date[4].substr(0,5)+" - "+t.end_date[2]+" "+t.end_date[1]+", "+t.end_date[4].substr(0,5)+"</li></ul><ul><li><b>Guest list:</b> "+t.guest_list+"</li></ul></div></li>";$("#test-json").prepend(e),$("#upcomming-event-list span").html(Cookies.get("counter"))}void 0!=Cookies.get("current_user")?(signIn(Cookies.getJSON("current_user").name),getProfile(),$("#member-button").hide(),$("#create-event-button").show()):($("#member-button").show(),$("#create-event-button").hide()),void 0==Cookies.get("counter")&&Cookies.set("counter",0);for(var t,n,s=0;s<=Cookies.get("counter")&&(n=Cookies.get("event_"+s),void 0!=n);s++)t=jQuery.parseJSON(n),e()});